{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/02/11/191548/","result":{"data":{"site":{"siteMetadata":{"title":"なにもわからない"}},"markdownRemark":{"id":"6fe4ad46-a9fd-502b-899b-d3487d4d0676","excerpt":"（これはメモ的なアレです。内容の正しさなどはアレです） たまに apk で指定バージョンのパッケージをインストールしたい時がある。\n例えば VSCode で Remote Container を使っていて、プラグインを動かす用に python 3.5.x がほしい時（具体的には CodeLLDB…","html":"<p>（これはメモ的なアレです。内容の正しさなどはアレです）</p>\n<p>たまに apk で指定バージョンのパッケージをインストールしたい時がある。\n例えば VSCode で Remote Container を使っていて、プラグインを動かす用に python 3.5.x がほしい時（具体的には <a href=\"https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb\">CodeLLDB</a> ）。</p>\n<p><code class=\"language-text\">apk add specific version package</code> とかで検索してみると、<code class=\"language-text\">package-name&gt;1.2.3</code> や <code class=\"language-text\">package-name=1.2.3</code> でインストールできると書いてあるものの、実際に試してみるとパッケージが見つからない。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">/ # apk add --no-cache python3=3.5\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nERROR: unsatisfiable constraints:\n  python3-3.5.6-r0:\n    breaks: world[python3=3.5]</code></pre></div>\n<p>どうも試行錯誤してみた感じでは、<code class=\"language-text\">--repository</code> オプションを指定しない場合は <code class=\"language-text\">v3.11</code> が使われていて、そもそも <code class=\"language-text\">v3.11</code> 内に古いパッケージが存在しなそうな挙動だった。\nそれと <code class=\"language-text\">=</code> はだいぶ厳格らしく、<code class=\"language-text\">package-name=1.2.3</code> は通らず <code class=\"language-text\">package-name=1.2.3-r12</code> まで書かないといけないらしい。</p>\n<ul>\n<li>[https://pkgs.alpinelinux.org/packages?name=python3&#x26;branch=v3.11]</li>\n<li>[https://pkgs.alpinelinux.org/packages?name=python3&#x26;branch=v3.5]</li>\n</ul>\n<p>結論、 <code class=\"language-text\">--repository</code> で古いパッケージを含むリポジトリを指定すればよい。もしかしてブランチの指定方法があるんじゃないかと思ったけどなさそう。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">apk add --no-cache --repository http://dl-cdn.alpinelinux.org/alpine/v3.5/main python3~=3.5</code></pre></div>\n<p><code class=\"language-text\">/etc/apk/repositories</code> に足すのでも動きそうな気はする。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">bash-5.0# cat /etc/apk/repositories\nhttp://dl-cdn.alpinelinux.org/alpine/v3.11/main\nhttp://dl-cdn.alpinelinux.org/alpine/v3.11/community</code></pre></div>\n<p>バージョンの指定方法はいくつかあって、この辺りは動きそう。</p>\n<ul>\n<li>厳密に書く: <code class=\"language-text\">python3=3.5.6-r0</code></li>\n<li>マイクロバージョンまで書く: <code class=\"language-text\">python3~=3.5.6</code></li>\n<li>マイナーバージョンまで書く: <code class=\"language-text\">python3~=3.5</code></li>\n</ul>\n<p>詳しくはこちら\n[https://github.com/tamakiii-sandbox/hello-apk-specific-version:embed:cite]</p>","frontmatter":{"title":"alpineのapkで古いpackageを指定してインストールする","date":"February 11, 2020","description":null}}},"pageContext":{"slug":"/2020/02/11/191548/","previous":{"fields":{"slug":"/docker-for-mac-nfs-for-symfony/"},"frontmatter":{"title":"Docker for Mac でも快適な Symfony 開発環境を作りたい"}},"next":{"fields":{"slug":"/2020/04/14/005648/"},"frontmatter":{"title":"docker-compose の ${VAR:-default} 記法と .env で開発＆本番環境を設計する"}}}}}